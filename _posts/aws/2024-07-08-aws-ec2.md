---
title: "EC2"
excerpt: ""

categories:
  - AWS
tags:
  - [aws]

permalink: /aws/aws-ec2

toc: true
toc_sticky: true

date: 2024-07-08
last_modified_at: 2024-07-10
---

## 1. EC2
- EC2(Elastic Compute Cloud)는 가상 서버로서 AWS에서 제공하는 다양한 애플리케이션을 돌릴 수 있다.
- EC2는 가상 서버이기 때문에 디스크 용량뿐 아니라, CPU, 메모리 및 네트워크 등 다양한 설정이 있다.
- EC2는 인스턴스가 실행되고 있을 때만 돈을 지불한다. 돈을 지불하는 방법은 온디맨드(on-demand), 리저브드(reserved), 스팟(spot) 세 가지로 나뉜다.

### 1-1. 온디맨드(on-demand)
- 온디맨드 지불 방식은 시간당 정해진 금액을 지불하면서 사용하는 방식이다. (제일 짧은 시간은 60초)
- 짧은 시간 동안 인스턴스를 임대하면서 사용하는 방식으로 주로 소프트웨어 검증 및 테스트 단계에서 많이 사용된다.
- 온디맨드 지불 방식은 개발 기간이 비교적 짧으며, 개발이 끝나는 시간을 미리 알 수 없을 때 유용하다.

### 1-2. 리저브드(reserved)
- EC2 인스턴스를 1~3년 정도 싸게 임대해서 사용할 수 있게 하는 지불 방식이다.
- 선불로 비용을 부담하여 추가적으로 지정된 컴퓨팅 시스템을 사용할 수 있다.
- 개발 중 요구 조건이 자주 변경되지 않고 개발의 시작과 끝을 미리 알고 있을 때 유용하다.
- 리저브드의 단점은 온디맨드와 달리 인스턴스의 크기를 늘리거나 줄일 수 없다. 인스턴스를 처음 생성할 때 지정했던 크기 및 설정을 그대로 가지고 사용해야 한다. 
- 위 단점에도 불구하고 비용 측면에서 큰 장점을 가지고 있기 때문에 선호된다.

### 1-3. 스팟(spot)
- 온디맨드, 리저브드와 달리 인스턴스 가격을 입찰하여 구매할 수 있다. 리저브드보다 할인율이 높으며 돈을 거의 들이지 않고 인스턴스를 구축할 수 있다.
- 입찰가에 내놓은 금액과 맞아 떨어지면 인스턴스가 실행되고, 그렇지 않다면 인스턴스가 꺼진다.
- 인스턴스의 시작과 끝이 중요하지 않은 곳에서 사용할 수 있다.

## 2. EBS(Elastic Block Store)
- EBS는 파일 및 오브젝트를 보관할 수 있는 스토리지 볼륨이다. 이 스토리지는 EC2 인스턴스에 부착되어 사용된다.
- EC2 인스턴스에 부착된 EBS 디스크 볼륨에 파일 시스템이 생성된다. 
- EC2 인스턴스가 종료되어도 EBS 안에 들어있는 데이터는 여전히 존재한다.
- AWS는 리전(region)으로 리소스가 분리되어 있다. 그 리전 안에서 가용 영역으로 범위가 또 나뉜다.EBS는 가용 영역을 설정해줘야 한다. 

### 2-1. EBS 타입
- EBS 볼륨 타입은 SSD와 HDD 두 가지로 나뉜다.
- SSD(Solid State Driver)
  - 빈번한 읽기/쓰기, 입출력의 비중이 매우 클 때 사용하면 좋은 타입
  - General Purpose SSD(gp2): 최대 10K IOPS 지원하며 1GB당 31IOPS의 속도가 나옴. 뛰어난 성능과 저렴한 비용 덕분에 보편적으로 널리 사용된다.
  - Provisioned IOPS SSD(io1): 극도의 I/O 처리를 요구하는 환경에서 사용된다. 10K 이상의 IOPS를 지원한다. gp2에 비해 훨씬 뛰어난 성능을 자랑하지만 비싼 비용 때문에 웬만해선 잘 사용하지 않는다.

    || General Purpose SSD |Provisioned IOPS SSD|
    |--|---------------------|--|
    |볼륨 타입| gp2                 |io1|
    |볼륨 크기| 1 GiB~16TiB         |4GiB~16TiB|
    |최대 IOPS|16000|64000|
    |장점|상대적으로 저렴한 비용으로 다소 뛰어난 성능|인스턴스에 여러 개의 EBS 부착할 수 있으며 최고의 성능|
    |단점|인스턴스에 여러 개의 EBS를 부착할 수 없음|가격이 비쌈|

- Magnetic/HDD
  - SSD는 IOPS가 주된 관심사였다면 HDD는 처리량(throughput)을 따져야 한다. 
  - 방대한 스트리밍 워크로드를 신경 써야 한다면 HDD가 탁월한 선택.
  - Throughput Optimized HDD(st1): 빅데이터 데이터 웨어하우스, 로그 프로세싱처럼 실시간으로 대용량의 데이터를 처리할 때 주로 사용된다. 부트 볼륨(Boot Volume)으로 사용할 수 없는 것이 치명적인 단점이다.
  - CDD HDD(sc1): 파일 서버처럼 Input/Output이 매우 드문 경우 사용된다. st1과 마찬가지로 부트 볼륨으로 사용할 수 없으나 가격이 매우 저렴한 것이 장점이다.
  - Magnetic(Standard): 디스크 용량(1GB)당 가장 싼 비용으로 사용할 수 있다. st1, sc1과는 달리 HDD군에서 부트 볼륨으로 사용할 수 있다.

    || Throughput Optimized HDD |CDD HDD|Magnetic|
    |---|--------------------------|---|---|
    |볼륨 타입| st1                      |sc1|Standard|
    |볼륨 크기| 125GiB~16TiB|125GiB~16TiB|1GiB~1TiB|
    |최대 IOPS|500|250|40~200|
    |최대 처리량|500MiB/s|250MiB/s|40~90MiB/s|
